<!DOCTYPE html>
<html lang="en">
    
<script>
    var all_activities = ["KSA", "AAA", "Engineering", "CSE", "LUG", "St. Liams", "Swimming", "5K", "Health", "Mental Health", "Frisbee", "Hackathon", "Rock Climbing", "Business"].sort();
    var my_activities = [];
</script>
    
<head>


  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>SB Admin 2 - Register</title>

  <!-- Custom fonts for this template-->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

  <!-- Custom styles for this template-->
  <link href="css/sb-admin-2.min.css" rel="stylesheet">
  <link href="css/register.css" rel="stylesheet">

<style>
	.border-bottom-success {
		border-bottom: black !important;
	}

	.border-bottom-primary {
		border-bottom: black !important;
	}
	
	.border-left-primary {
		border-left: black !important;
	}

	.border-left-success {
		border-left: black !important;
	}

	.modal-footer {
		margin-top: 25px;
	}	
</style>
</head>

<body class="bg-gradient-primary">

  <div class="container">

    <div class="card o-hidden border-0 shadow-lg my-5">
      <div class="card-body p-0">
        <!-- Nested Row within Card Body -->
        <div class="row">
          <div class="col-lg-5 d-none d-lg-block bg-register-image"></div>
          <div class="col-lg-7">
            <div class="p-5">
              <div class="text-center">
                <h1 class="h4 text-gray-900 mb-4">Create an Account!</h1>
              </div>
              <form class="user">
                <div class="form-group row">
                  <div class="col-sm-6 mb-3 mb-sm-0">
                    <input type="text" class="form-control form-control-user" id="FirstName" placeholder="First Name">
                  </div>
                  <div class="col-sm-6">
                    <input type="text" class="form-control form-control-user" id="LastName" placeholder="Last Name">
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-6 mb-3 mb-sm-0">
                    <input type="email" class="form-control form-control-user" id="InputEmail" placeholder="Notre Dame email">
                  </div>
                  <div class="col-sm-6">
                    <input type="text" class="form-control form-control-user" id="Major" placeholder="Major">
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-6 mb-3 mb-sm-0">
                    <input type="password" class="form-control form-control-user" id="InputPassword" placeholder="Password">
                  </div>
                  <div class="col-sm-6">
                    <input type="password" class="form-control form-control-user" id="RepeatPassword" placeholder="Repeat Password">
                  </div>
                </div>
                <button type='button' onclick="tryRegister()" class="btn btn-primary btn-user btn-block">
                  Register Account
                </button>
                <hr>
              </form>
              <div class="text-center">
                <a class="small" href="login.html">Already have an account? Login!</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
<!-- Modal -->
<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Valid Account! Just One More Step...</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p align="left">
          What are you interested in knowing about? Select tags you would like to be notified about! 
</br></br>
The more tags you have, the more you'll see! The more focused your tags are, the more personalized the content will be!
        </p>
        <h3> Your Tags</h3>  
        <div id="userChips" class="border-bottom-success  border-left-success">
        </div>
        <h3 style="margin-top: 25px;">Possible Tags</h3>
        <div id="allTags" class="border-left-primary border-bottom-primary">
        </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" onclick=moveit()>Save Changes</button>
      </div>
    </div>
  </div>
</div>                                                        
      </div>
</div>
  <!-- Bootstrap core JavaScript-->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="js/sb-admin-2.min.js"></script>

</body>
  <script>
    function moveit(){
      document.location = './events.html';
      return;
    }
    console.log(all_activities.length);
    console.log(typeof all_activities);
    var i = 0;
    for (i; i < all_activities.length; i++) {
      $('#allTags').append('<button type="button" class="pill_tag1 btn btn-warning btn-sm" id="temporary_id" style="margin:2px">' + all_activities[i] + '</button>');
      document.getElementById("temporary_id").id = all_activities[i];
      console.log(document.getElementById(all_activities[i]));
    }
  </script>
</html>

<script>
    $("#allTags").on("click", ".pill_tag1", function(){
        if(all_activities.includes(this.id)){
            my_activities.push(this.id);
            all_activities.splice( all_activities.indexOf(this.id), 1 );
            addTag(this.id);
            console.log(all_activities);
            return;
        }
        return;
    });
    
    $("#userChips").on("click", ".pill_tag2", function(){
        console.log("okokok");    
        if(my_activities.includes(this.id)) {
            console.log("do i ever make it here");
            all_activities.push(this.id);
            my_activities.splice(my_activities.indexOf(this.id), 1 );
            removeTag(this.id);
            return;
        }
        console.log(my_activities);
        return
    }); 
    
    function addTag(tagId) {
        var element = document.getElementById(tagId);
        element.parentNode.removeChild(element);
        $('#userChips').append('<button type="button" class="pill_tag2 btn btn-warning btn-sm" id="temporary_id" style="margin:2px">' + tagId + '</button>');
        console.log(my_activities);
        document.getElementById("temporary_id").id = tagId;
    }
    
    function removeTag(tagId){
        var element = document.getElementById(tagId);
        element.parentNode.removeChild(element);
        $('#allTags').append('<button type="button" class="pill_tag1 btn btn-warning btn-sm" id="temporary_id" style="margin:2px">' + tagId + '</button>');
        document.getElementById("temporary_id").id = tagId;
    }
    
    function modalOn(){
        console.log('HELLLLLLLP');
        $('#logoutModal').modal();
    }
    
    function tryRegister(){
        
        if($('#InputEmail').val() == "" || $('#InputPassword').val() == "" || $('#FirstName').val() == "" || $('#LastName').val() == "" || $('#RepeatPassword').val() == ""){
            console.log("a field is mssing");
            return;
        }
        var email = ($('#InputEmail').val()).split("@");
        if (email[1] !== "nd.edu"){
            console.log("Not a valid ND email");
            return;
        }
        console.log(typeof $('#InputEmail').val())
        if ($('#InputPassword').val() !== $('#RepeatPassword').val()){
            console.log('Passwords do not match')
            return
        }
        var userData = {
            firstName   : $('#FirstName').val(),
            lastName    : $('#LastName').val(),
            password    : $('#InputPassword').val(),
            email       : $('#InputEmail').val()
            
        };
        $('#logoutModal').modal();
        console.log('end');
    }
</script>
